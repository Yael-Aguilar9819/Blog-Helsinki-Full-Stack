(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{10:function(e,t,n){e.exports={buttonWithFunction:"BlogDetailedView_buttonWithFunction__nUW_Y"}},12:function(e,t,n){e.exports={buttonWithFunction:"BlogSimplifiedView_buttonWithFunction__3U7Wg"}},13:function(e,t,n){e.exports={blogSeparator:"Blog_blogSeparator__2iU4h"}},21:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(11),i=n.n(c),s=n(14),o=n(6),u=n(2),l=n.n(u),b=n(3),j=n(4),f=n(12),d=n.n(f),p=n(0),v=function(e){var t=e.title,n=e.author,r=e.visiblityFunc;return Object(p.jsxs)("div",{children:[t," ",n,Object(p.jsx)("button",{type:"submit",className:d.a.buttonWithFunction,onClick:r,children:"View"})]})},g=n(10),h=n.n(g),O=function(e){var t=e.blogInfo,n=e.visiblityFunc,r=e.addLikeFunc,a=e.removeBlogFunc;return Object(p.jsxs)("div",{children:[t.title," ",t.author,Object(p.jsx)("button",{type:"submit",className:h.a.buttonWithFunction,onClick:n,children:"Hide"}),Object(p.jsx)("br",{}),t.url,Object(p.jsx)("br",{}),"Likes"," ",t.likes,Object(p.jsx)("button",{type:"submit",className:h.a.buttonWithFunction,onClick:r,children:"Like"}),Object(p.jsx)("br",{}),t.user.name,Object(p.jsx)("br",{}),Object(p.jsx)("button",{type:"submit",onClick:a,children:"Remove"})]})},x=n(13),m=n.n(x),k=function(e){var t=e.blog,n=e.likeFunction,a=e.removeBlogFunc,c=Object(r.useState)(!1),i=Object(j.a)(c,2),s=i[0],o=i[1],u=function(){o(!s)},l=function(){n(t)},b=function(){window.confirm("Remove blog ".concat(t.title," by ").concat(t.author))&&a(t)},f=function(){return s?Object(p.jsx)(O,{blogInfo:t,addLikeFunc:l,visiblityFunc:u,removeBlogFunc:b}):Object(p.jsx)(v,{title:t.title,author:t.author,visiblityFunc:u})};return Object(p.jsx)("div",{className:m.a.blogSeparator,children:Object(p.jsx)(f,{})})},w=function(e){var t=e.blogs,n=e.likeFunction,r=e.removeBlogFunction;return t.map((function(e){return Object(p.jsx)(k,{blog:e,likeFunction:n,removeBlogFunc:r},e.id)}))},y=function(e){var t=e.createNewBlogServ,n=e.messageAsTitle,a=Object(r.useState)({title:"",author:"",url:""}),c=Object(j.a)(a,2),i=c[0],s=c[1],u=function(e,t){var n=Object(o.a)({},i);n[t]=e,s(n)},f=function(){var e=Object(b.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),r=Object.keys(i).reduce((function(e,t){return e[t]="",e}),{}),t(i),s(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:n}),Object(p.jsxs)("form",{onSubmit:f,children:[Object(p.jsxs)("div",{children:["Title:",Object(p.jsx)("input",{type:"text",value:i.title,name:"Title",onChange:function(e){var t=e.target;return u(t.value,"title")}})]}),Object(p.jsxs)("div",{children:["Author:",Object(p.jsx)("input",{type:"text",value:i.author,name:"Author",onChange:function(e){var t=e.target;return u(t.value,"author")}})]}),Object(p.jsxs)("div",{children:["URL:",Object(p.jsx)("input",{type:"text",value:i.url,name:"URL",onChange:function(e){var t=e.target;return u(t.value,"url")}})]}),Object(p.jsx)("button",{type:"submit",children:"Create"})]})]})},F=function(e){var t=e.loginFunc,n=e.nameField,r=e.setNameFunc,a=e.passField,c=e.setPassFunc;return Object(p.jsxs)("form",{onSubmit:t,children:[Object(p.jsxs)("div",{children:["username",Object(p.jsx)("input",{type:"text",value:n,name:"Username",onChange:function(e){var t=e.target;return r(t.value)}})]}),Object(p.jsxs)("div",{children:["password",Object(p.jsx)("input",{type:"password",value:a,name:"Password",onChange:function(e){var t=e.target;return c(t.value)}})]}),Object(p.jsx)("button",{type:"submit",children:"login"})]})},_=n(7),N=n.n(_),S=function(e){var t=e.messageInfo;if(null===t)return null;var n=t.message;return"positive"===t.status?Object(p.jsx)("div",{className:N.a.positiveContainer,children:Object(p.jsx)("h2",{className:N.a.positiveMessage,children:n})}):Object(p.jsx)("div",{className:N.a.negativeContainer,children:Object(p.jsx)("h2",{className:N.a.negativeMessage,children:n})})};S.defaultProps={messageInfo:null};var C=S,B=a.a.forwardRef((function(e,t){var n=e.buttonLabel,a=e.children,c=Object(r.useState)(!1),i=Object(j.a)(c,2),s=i[0],o=i[1],u={display:s?"none":""},l={display:s?"":"none"},b=function(){o(!s)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:b}})),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{style:u,children:Object(p.jsx)("button",{type:"submit",onClick:b,children:n})}),Object(p.jsxs)("div",{style:l,children:[a,Object(p.jsx)("button",{type:"button",onClick:b,children:"Cancel"})]})]})})),T="/api/blogs",A=null,I=function(){var e=Object(b.a)(l.a.mark((function e(t,n,r,a){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:n,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:a},body:r});case 2:if(!((c=e.sent).status<200||c.status>299)){e.next=7;break}throw new Error("cannot fetch data with error code: ".concat(c.status));case 7:if(204!==c.status){e.next=9;break}return e.abrupt("return","Blog deleted succesfully");case 9:return e.abrupt("return",c.json());case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),M=function(){var e=Object(b.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(T);case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L={getAll:M,create:function(e){return I(T,"POST",JSON.stringify(e),A)},update:function(e,t){return I("".concat(T,"/").concat(e),"PUT",JSON.stringify(t),A)},setToken:function(e){A="bearer ".concat(e)},deleteBlog:function(e){return I("".concat(T,"/").concat(e),"DELETE","",A)}},U=function(){var e=Object(b.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W={login:U},J="loggedBlogUser",E="positive",P="negative",R=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),i=Object(j.a)(c,2),u=i[0],f=i[1],d=Object(r.useState)(""),v=Object(j.a)(d,2),g=v[0],h=v[1],O=Object(r.useState)(null),x=Object(j.a)(O,2),m=x[0],k=x[1],_=Object(r.useState)(null),N=Object(j.a)(_,2),S=N[0],T=N[1],A=Object(r.useRef)();Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getAll();case 2:t=e.sent,H(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(r.useEffect)((function(){var e=window.localStorage.getItem(J);if(e){var t=JSON.parse(e);k(t),L.setToken(t.token)}}),[]);var I=function(){var e=Object(b.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,W.login({username:u,password:g});case 4:if(n=e.sent,window.localStorage.setItem("loggedNoteappUser",JSON.stringify(n)),L.setToken(n.token),n.token){e.next=10;break}return V("Wrong credentials",P),e.abrupt("return");case 10:V("Succesfully logged!",E),window.localStorage.setItem(J,JSON.stringify(n)),k(n),f(""),h(""),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),V(e.t0,P);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(b.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A.current.toggleVisibility(),e.next=4,L.create(t);case 4:r=e.sent,H(n.concat(r)),V("A New blog was Created!",E),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),V("An error ocurred",P);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(l.a.mark((function e(t){var r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object(o.a)(Object(o.a)({},t),{},{likes:t.likes+1,user:t.user.id}),e.next=4,L.update(r.id,r);case 4:a=e.sent,c=D(a,n),H(c),V("A new like was added to the blog!",E),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),V("An error happened",P);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(b.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.deleteBlog(t.id);case 3:r=n.filter((function(e){return e.id!==t.id})),H(r),V("".concat(t.title," was removed."),E),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),V("An error happened",P);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),D=function(e,t){var n=t.findIndex((function(t){return t.id===e.id}));return t.slice(0,n).concat(e,t.slice(n+1))},V=function(e,t){T({message:e,status:t}),setTimeout((function(){T(null)}),5e3)},H=function(e){var t=Object(s.a)(e).sort((function(e,t){return e.likes>t.likes?-1:t.likes>e.likes?1:0}));a(t)};return Object(p.jsxs)("div",{children:[Object(p.jsx)(C,{messageInfo:S}),null===m?Object(p.jsx)(F,{loginFunc:I,nameField:u,setNameFunc:f,passField:g,setPassFunc:h}):Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{children:[Object(p.jsxs)("p",{className:"username-permanent",children:[m.username," ","logged in"]}),Object(p.jsx)("button",{onClick:function(){window.localStorage.removeItem(J),L.setToken("null"),V("Logged out succesfully!",E),k(null)},type:"submit",children:"Log out"}),Object(p.jsx)(B,{buttonLabel:"Create Blog",ref:A,children:Object(p.jsx)(y,{createNewBlogServ:M,messageAsTitle:"Create New Blog"})})]}),Object(p.jsx)(w,{blogs:n,likeFunction:U,removeBlogFunction:R})]})]})};i.a.render(Object(p.jsx)(R,{}),document.getElementById("root"))},7:function(e,t,n){e.exports={basicMessage:"Notification_basicMessage__2d-4h",positiveMessage:"Notification_positiveMessage__3DAgH Notification_basicMessage__2d-4h",negativeMessage:"Notification_negativeMessage__35Mq8 Notification_basicMessage__2d-4h",positiveContainer:"Notification_positiveContainer__1jqN9",negativeContainer:"Notification_negativeContainer__1MUBx"}}},[[21,1,2]]]);
//# sourceMappingURL=main.6a4b1e66.chunk.js.map